<!-- Milani Francesco 5AI
Realizzare una applicazione con un'interfaccia che consenta di inserire i dati di una rubrica telefonica
(ID, nome, cognome, indirizzo, telefono, ecc.), visualizzarli e cancellarli.
Relativamente alla cancellazione di un record e relativi messaggi utente sull'esito dell'operazione,
dopo aver lanciato la query da codice Php utilizzare la funzione mysqli_affected_rows che restituisce
il numero di record interessati dalla query appena eseguita: se restituisce il valore 0, la cancellazione non è avvenuta.
-->
<!DOCTYPE html>
<html xml:lang="it" lang="it">

<head>
	<title>Rubrica Milani</title>
	<meta http-equiv="content-type" content="text/html;charset=utf-8" />
	<style>
		table, th, td
		{
			border: 1px solid black;
			border-collapse: collapse;
		}
		
		th, td
		{
			padding: 5px;
			text-align: left;    
		}
		
		.verde
		{
			color: lightgreen;
		}
		
		.rosso
		{
			color: red;
		}
	</style>
</head>

<body>
	<h1>Rubrica di Milani Francesco</h1>
	<h2 class="verde">Cancellazione avvenuta con successo</h2>	
	<h3>Inserisci i dati:</h3>
	<form method="post">
		Nome:
		<input type="text" name="nome" maxlength="30" size="30" required> <br>
		Cognome:

		Root /
			File na<?php
			//ini_set( "display_errors", 0);
		  
			include("parametri.php");
		  
			$id=$_POST["id"];
			$nome=$_POST["nome"];
			$cognome=$_POST["cognome"];
			$indirizzo=$_POST["indirizzo"];
			$telefono=$_POST["telefono"];
			
			print("<html><head><title>Rubrica in PhP</title></head><body>");
			print("<h1>Rubrica in PhP</h1>");
		  
			// Connessione al server dbms
			$connect = mysqli_connect($server, $username, $password)
				  or die("Connessione non riuscita: " . mysqli_error($connect));
			print ("<h4>Connesso con successo al server!</h4> " . "$server <br>");
			
			// selezione database
			mysqli_select_db($connect, $database) 
			  or die ("Impossibile selezionare il db");
			// Esecuzione della query
			$table = "contatto"; // nome della tabella contenuta nel db
			$query = "insert into $table(ID,Nome,Cognome,Indirizzo,Telefono) values('$id','$nome','$cognome','$indirizzo','$telefono');"; // query da eseguire
			$result = mysqli_query($connect, $query)
			  or die ("Errore nella query 1 " . mysqli_error($connect));
			$table = "contatto"; // nome della tabella contenuta nel db
			$query = "select * from $database.$table"; // query da eseguire
			$result = mysqli_query($connect, $query)
			  or die ("Errore nella query 2" . mysqli_error($connect));
		  
			print("<h3>Riepilogo contatti</h3>");  
		  
			// Visualizzo il risultato della query
			while ($search = mysqli_fetch_array($result))
			  /* $search è un vettore associativo, per accedere all'elemento
				 si usa come indice il nome del campo della tabella */
			  {
				print "<br>";
				print "$search[ID] " . "$search[Nome] " .  "$search[Cognome] " . "$search[Indirizzo] " . "$search[Telefono]";
			  }
			print("</body></html>");  
			// libero la memoria occupata dall'istruzione SELECT
			mysqli_free_result($result);
			mysqli_close($connect); // chiusura della connessione al server Mysql
		  ?>measc 	Last updated  	Size 
		dir 	
		..
				
		dir 	
		65
				
		dir 	
		Connessione_db 
				
		dir 	
		documentwrite
				
		dir 	
		Form
				
		dir 	
		prove
				
		dir 	
		rubrica
				
		html 	
		index2.html
			Feb 10, 2020 10:07 	2.7 KB
		" name="reset" value="Resetta i dati">
		<input type="submit" name="invia" value="Inserisci">
	</form>
	
	<h3>Modifica un record:</h3>
	<form method="post">
		ID:
		<input type="text" name="id" maxlength="3" size="30" placeholder="L'id del record che viene modificato" required> <br>
		Nome:
		<input type="text" name="nome" maxlength="30" size="30" required> <br>
		Cognome:
		<input type="text" name="cognome" maxlength="30" size="30" required> <br>
		Indirizzo:
		<input type="text" name="indirizzo" maxlength="50" size="50" required> <br>
		Numero di telefono:
		<input type="text" name="telefono" maxlength="10" size="10" required> <br>
		<input type="reset" name="reset" value="Resetta i dati">
		<input type="submit" name="modifica" value="Modifica il record">
	</form>
	
	<h3>Cancella un record:</h3>
	<form method="post">
		ID:
		<input type="text" name="id" size="30" maxlength="3" placeholder="L'id del record che viene cancellato"> <br>
		<input type="submit" name="cancella" value="Cancella il record selezionato">
		<input type="submit" name="tutto" value="Cancella tutti i record dalla tabella">
	</form>
	
	<h3>Rubrica:</h3>
	<table>
		<tr>
			<th>ID</th>
			<th>Nome</th>
			<th>Cognome</th>
			<th>Indirizzo</th>
			<th>Telefono</th>
		</tr>
			</table>
</body>

</html>